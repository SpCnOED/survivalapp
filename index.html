<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f766e"/>
  <link rel="manifest" href="./manifest.webmanifest">
  <title>Community Services Finder</title>
  <style>
    :root{--bg:#f7f7f8;--fg:#111;--muted:#666;--card:#fff;--accent:#0f766e}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}
    header{position:sticky;top:0;background:rgba(255,255,255,.95);backdrop-filter:saturate(1.2) blur(6px);border-bottom:1px solid #e5e7eb}
    header .wrap{max-width:960px;margin:0 auto;display:flex;gap:12px;align-items:center;padding:12px 16px}
    h1{font-size:18px;margin:0} .muted{color:var(--muted);font-size:12px}
    main{max-width:960px;margin:0 auto;padding:16px}
    .filters{display:grid;grid-template-columns:1fr 160px 120px;gap:10px;margin-bottom:12px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    input,select,button{height:36px;padding:0 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
    button{cursor:pointer} .pill{display:inline-flex;align-items:center;padding:2px 8px;border:1px solid #e5e7eb;border-radius:999px;font-size:12px;color:#444}
    .list{display:grid;gap:10px}
    .card{background:var(--card);border:1px solid #e5e7eb;border-radius:16px;padding:14px}
    .card h3{margin:0 0 6px 0;font-size:18px}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;background:#eef2ff;border:1px solid #e5e7eb;margin-right:6px}
    .badge.open{background:#e6ffed;border-color:#b7ebc6}
    .meta{color:#444;font-size:14px;margin:6px 0}
    .actions{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
    .actions a, .actions button{border-radius:10px;border:1px solid #d1d5db;background:#fff;padding:8px 10px;text-decoration:none;color:#111}
    footer{max-width:960px;margin:0 auto;padding:24px 16px;text-align:center;color:#666;font-size:12px}
    @media (max-width:640px){.filters{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div>
        <h1>Community Services Finder</h1>
        <div class="muted">Installable • Offline-ready • “Near me”</div>
      </div>
      <div style="margin-left:auto" class="row">
        <button id="btn-export">Export</button>
        <label class="row" style="gap:6px">
          <input id="file-import" type="file" accept="application/json" style="display:none">
          <button id="btn-import">Import</button>
        </label>
      </div>
    </div>
  </header>
  <main>
    <div class="filters">
      <input id="q" placeholder="Search by name, need (e.g., food, shelter), or keywords" />
      <select id="cat"></select>
      <div class="row" style="justify-content:flex-end">
        <label class="row"><input id="openNow" type="checkbox"> Open now</label>
        <button id="nearMe">Near me</button>
      </div>
    </div>
    <div id="distanceWrap" class="row" style="justify-content:flex-start;display:none;margin-bottom:12px">
      <span class="muted">Max distance (km)</span>
      <input id="maxKm" type="range" min="1" max="100" step="1" value="50">
      <span id="maxKmLabel" class="pill">50</span>
    </div>
    <div id="list" class="list"></div>
  </main>
  <footer>
    Add to Home Screen from Chrome menu • Works offline after first load
  </footer>

<script type="module" src="./app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js');
    });
  }
</script>
</body>
</html>
